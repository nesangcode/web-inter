/*! For license information please see app~8f54dbf9.bundle.js.LICENSE.txt */
"use strict";(self.webpackChunkapp_starter_project_with_webpack=self.webpackChunkapp_starter_project_with_webpack||[]).push([[126],{752:(t,e,n)=>{n.d(e,{v:()=>f});var r=n(444);function a(t){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a(t)}function i(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return o(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,a=function(){};return{s:a,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,c=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return s=t.done,t},e:function(t){c=!0,i=t},f:function(){try{s||null==n.return||n.return()}finally{if(c)throw i}}}}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function s(){s=function(){return e};var t,e={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(t,e,n){t[e]=n.value},o="function"==typeof Symbol?Symbol:{},c=o.iterator||"@@iterator",l=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function d(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{d({},"")}catch(t){d=function(t,e,n){return t[e]=n}}function f(t,e,n,r){var a=e&&e.prototype instanceof b?e:b,o=Object.create(a.prototype),s=new O(r||[]);return i(o,"_invoke",{value:B(t,n,s)}),o}function p(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=f;var h="suspendedStart",v="suspendedYield",y="executing",m="completed",g={};function b(){}function w(){}function k(){}var I={};d(I,c,(function(){return this}));var L=Object.getPrototypeOf,x=L&&L(L(_([])));x&&x!==n&&r.call(x,c)&&(I=x);var E=k.prototype=b.prototype=Object.create(I);function S(t){["next","throw","return"].forEach((function(e){d(t,e,(function(t){return this._invoke(e,t)}))}))}function M(t,e){function n(i,o,s,c){var l=p(t[i],t,o);if("throw"!==l.type){var u=l.arg,d=u.value;return d&&"object"==a(d)&&r.call(d,"__await")?e.resolve(d.__await).then((function(t){n("next",t,s,c)}),(function(t){n("throw",t,s,c)})):e.resolve(d).then((function(t){u.value=t,s(u)}),(function(t){return n("throw",t,s,c)}))}c(l.arg)}var o;i(this,"_invoke",{value:function(t,r){function a(){return new e((function(e,a){n(t,r,e,a)}))}return o=o?o.then(a,a):a()}})}function B(e,n,r){var a=h;return function(i,o){if(a===y)throw Error("Generator is already running");if(a===m){if("throw"===i)throw o;return{value:t,done:!0}}for(r.method=i,r.arg=o;;){var s=r.delegate;if(s){var c=T(s,r);if(c){if(c===g)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(a===h)throw a=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);a=y;var l=p(e,n,r);if("normal"===l.type){if(a=r.done?m:v,l.arg===g)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(a=m,r.method="throw",r.arg=l.arg)}}}function T(e,n){var r=n.method,a=e.iterator[r];if(a===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,T(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),g;var i=p(a,e.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,g;var o=i.arg;return o?o.done?(n[e.resultName]=o.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,g):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function j(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function A(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function O(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(j,this),this.reset(!0)}function _(e){if(e||""===e){var n=e[c];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,o=function n(){for(;++i<e.length;)if(r.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=t,n.done=!0,n};return o.next=o}}throw new TypeError(a(e)+" is not iterable")}return w.prototype=k,i(E,"constructor",{value:k,configurable:!0}),i(k,"constructor",{value:w,configurable:!0}),w.displayName=d(k,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===w||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,k):(t.__proto__=k,d(t,u,"GeneratorFunction")),t.prototype=Object.create(E),t},e.awrap=function(t){return{__await:t}},S(M.prototype),d(M.prototype,l,(function(){return this})),e.AsyncIterator=M,e.async=function(t,n,r,a,i){void 0===i&&(i=Promise);var o=new M(f(t,n,r,a),i);return e.isGeneratorFunction(n)?o:o.next().then((function(t){return t.done?t.value:o.next()}))},S(E),d(E,u,"Generator"),d(E,c,(function(){return this})),d(E,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=_,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(A),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function a(r,a){return s.type="throw",s.arg=e,n.next=r,a&&(n.method="next",n.arg=t),!!a}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],s=o.completion;if("root"===o.tryLoc)return a("end");if(o.tryLoc<=this.prev){var c=r.call(o,"catchLoc"),l=r.call(o,"finallyLoc");if(c&&l){if(this.prev<o.catchLoc)return a(o.catchLoc,!0);if(this.prev<o.finallyLoc)return a(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return a(o.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return a(o.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var i=a;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=t,o.arg=e,i?(this.method="next",this.next=i.finallyLoc,g):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),g},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),A(n),g}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var a=r.arg;A(n)}return a}}throw Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:_(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),g}},e}function c(t,e,n,r,a,i,o){try{var s=t[i](o),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(r,a)}function l(t){return function(){var e=this,n=arguments;return new Promise((function(r,a){var i=t.apply(e,n);function o(t){c(i,r,a,o,s,"next",t)}function s(t){c(i,r,a,o,s,"throw",t)}o(void 0)}))}}function u(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,d(r.key),r)}}function d(t){var e=function(t){if("object"!=a(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=a(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==a(e)?e:e+""}var f=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.isMapView=!1},e=[{key:"render",value:(d=l(s().mark((function t(e){var n,r=arguments;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=r.length>1&&void 0!==r[1]&&r[1],t.abrupt("return",'\n      <div class="container">\n        <section class="hero-section" aria-labelledby="hero-title">\n          <h1 id="hero-title">Dicoding Stories</h1>\n          <p>Berbagi cerita dan pengalaman belajar bersama komunitas developer Indonesia</p>\n          \n          '.concat(e&&e.name?'\n            <div class="user-welcome" role="region" aria-labelledby="welcome-text">\n              <p id="welcome-text">Selamat datang kembali, <strong>'.concat(e.name,"</strong>! 👋</p>\n              ").concat(n?'\n                <div class="offline-notice">\n                  <p>📵 Mode offline - Fitur upload story tidak tersedia</p>\n                </div>\n              ':'\n                <nav class="action-buttons" aria-label="Aksi utama">\n                  <a href="#/add-story" class="btn btn-primary">Bagikan Story Baru</a>\n                  <a href="#/add-guest-story" class="btn btn-secondary">Story Tamu</a>\n                </nav>\n              ',"\n            </div>\n          "):"\n            ".concat(n?'\n              <div class="offline-notice">\n                <p>📵 Mode offline - Silakan terhubung ke internet untuk login atau mendaftar</p>\n              </div>\n            ':'\n              <nav class="auth-buttons" aria-label="Authentication options">\n                <a href="#/login" class="btn btn-primary">Login</a>\n                <a href="#/register" class="btn btn-secondary">Daftar</a>\n                <a href="#/add-guest-story" class="btn btn-outline">Bagikan Story Tamu</a>\n              </nav>\n            ',"\n          "),'\n        </section>\n        \n        <section class="stories-section" aria-labelledby="stories-title">\n          <header class="section-header">\n            <h2 id="stories-title">Stories Terbaru</h2>\n            ').concat(e&&e.name?'\n              <div class="view-toggle" role="group" aria-label="Pilihan tampilan stories">\n                <button id="grid-view-btn" class="btn btn-small active" aria-label="Tampilan grid" aria-pressed="true">📋</button>\n                <button id="map-view-btn" class="btn btn-small" aria-label="Tampilan peta" aria-pressed="false">🗺️</button>\n              </div>\n            ':"",'\n          </header>\n          \n          <div id="stories-view" role="region" aria-live="polite" aria-label="Konten stories">\n            <div id="stories-container" class="stories-grid" role="feed" aria-label="Daftar stories">\n              <div class="loading">Memuat stories...</div>\n            </div>\n            \n            ').concat(e&&e.name?'\n              <div id="stories-map" class="stories-map-container" style="display: none;">\n                <div id="map" class="stories-map" role="img" aria-label="Peta lokasi stories"></div>\n              </div>\n            ':"","\n          </div>\n          \n\n        </section>\n      </div>\n    "));case 2:case"end":return t.stop()}}),t)}))),function(t){return d.apply(this,arguments)})},{key:"renderStories",value:(c=l(s().mark((function t(e){var n,r,a,i,o=arguments;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=o.length>1&&void 0!==o[1]&&o[1],r=document.getElementById("stories-container"),a="",n&&(a='\n        <div class="offline-banner">\n          <span class="offline-icon">🔴</span>\n          <span>Mode Offline - Menampilkan stories yang tersimpan</span>\n        </div>\n      '),i=e.map((function(t){return'\n      <article class="story-card '.concat(n?"offline-story":"",'" data-story-id="').concat(t.id,'" role="button" tabindex="0" aria-label="Story dari ').concat(t.name,'">\n        <div class="story-image">\n          <img src="').concat(t.photoUrl,'" alt="Foto story: ').concat(t.description,'" loading="lazy" data-original-src="').concat(t.photoUrl,'">\n        </div>\n        <div class="story-content">\n          <h3>').concat(t.name,'</h3>\n          <p class="story-description">').concat(t.description,'</p>\n          <div class="story-meta">\n            <span class="story-date" aria-label="Dibuat pada ').concat(new Date(t.createdAt).toLocaleDateString("id-ID"),'">').concat(new Date(t.createdAt).toLocaleDateString("id-ID"),"</span>\n            ").concat(t.lat&&t.lon?'<span class="story-location" aria-label="Memiliki informasi lokasi">📍 Ada lokasi</span>':"","\n            ").concat(n?'<span class="offline-badge">📱 Offline</span>':"","\n          </div>\n        </div>\n      </article>\n    ")})).join(""),r.innerHTML=a+i,t.next=8,this._handleImageCaching(e,n);case 8:case"end":return t.stop()}}),t,this)}))),function(t){return c.apply(this,arguments)})},{key:"showLoading",value:function(){var t=document.getElementById("stories-container");t&&(t.innerHTML='<div class="loading">Memuat stories...</div>')}},{key:"showError",value:function(t){var e=document.getElementById("stories-container");e&&(e.innerHTML='<p class="error">Gagal memuat stories: '.concat(t,"</p>"))}},{key:"showNoStories",value:function(){var t=document.getElementById("stories-container");t&&(t.innerHTML='<p class="no-stories">Belum ada stories yang tersedia.</p>')}},{key:"showAuthRequired",value:function(){var t=document.getElementById("stories-container");t&&(t.innerHTML='\n        <div class="auth-required">\n          <p>Silakan login untuk melihat stories dari komunitas Dicoding</p>\n        </div>\n      ')}},{key:"showOfflineMode",value:function(){var t=document.getElementById("stories-container");t&&(t.innerHTML='<div class="loading offline-loading">🔴 Mode Offline</div>')}},{key:"showNoOfflineStories",value:function(){var t=document.getElementById("stories-container");t&&(t.innerHTML='\n        <div class="offline-no-stories">\n          <div class="offline-banner">\n            <span class="offline-icon">🔴</span>\n            <span>Mode Offline</span>\n          </div>\n          <p>Tidak ada stories yang tersimpan untuk dibaca offline.</p>\n          <p>Silakan terhubung ke internet untuk melihat stories terbaru.</p>\n        </div>\n      ')}},{key:"showOfflineError",value:function(){var t=document.getElementById("stories-container");t&&(t.innerHTML='\n        <div class="offline-error">\n          <div class="offline-banner">\n            <span class="offline-icon">🔴</span>\n            <span>Mode Offline</span>\n          </div>\n          <p class="error">Gagal memuat stories offline. Silakan coba lagi atau terhubung ke internet.</p>\n        </div>\n      ')}},{key:"showOfflineMapMessage",value:function(){var t=document.getElementById("stories-container");if(t){var e=t.innerHTML;t.innerHTML='\n        <div class="offline-map-notice">\n          <p>📍 Tampilan peta tidak tersedia dalam mode offline. Menampilkan dalam format grid.</p>\n        </div>\n        '.concat(e,"\n      ")}}},{key:"_handleImageCaching",value:(o=l(s().mark((function t(e,n){var a,o,c,l,u,d;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=i(e),t.prev=1,a.s();case 3:if((o=a.n()).done){t.next=22;break}if(!(c=o.value).photoUrl){t.next=20;break}if(t.prev=6,!n){t.next=14;break}return t.next=10,r.A.getCachedImage(c.photoUrl);case 10:(l=t.sent)?(u=document.querySelector('img[data-original-src="'.concat(c.photoUrl,'"]')))&&(u.src=l,u.setAttribute("data-cached","true"),console.log("Using cached image for story:",c.id)):(d=document.querySelector('img[data-original-src="'.concat(c.photoUrl,'"]')))&&(d.src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzAwIiBoZWlnaHQ9IjIwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjZjBmMGYwIi8+PHRleHQgeD0iNTAlIiB5PSI1MCUiIGZvbnQtZmFtaWx5PSJBcmlhbCwgc2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgZmlsbD0iIzk5OSIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZHk9Ii4zZW0iPkdhbWJhciB0aWRhayB0ZXJzZWRpYSBvZmZsaW5lPC90ZXh0Pjwvc3ZnPg==",d.setAttribute("data-cached","false"),d.setAttribute("alt","Gambar tidak tersedia offline")),t.next=15;break;case 14:this._cacheImageInBackground(c.photoUrl,c.id);case 15:t.next=20;break;case 17:t.prev=17,t.t0=t.catch(6),console.warn("Failed to handle image caching for story:",c.id,t.t0);case 20:t.next=3;break;case 22:t.next=27;break;case 24:t.prev=24,t.t1=t.catch(1),a.e(t.t1);case 27:return t.prev=27,a.f(),t.finish(27);case 30:case"end":return t.stop()}}),t,this,[[1,24,27,30],[6,17]])}))),function(t,e){return o.apply(this,arguments)})},{key:"_cacheImageInBackground",value:(a=l(s().mark((function t(e,n){var a,i;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch(e);case 3:if(!(a=t.sent).ok){t.next=11;break}return t.next=7,a.blob();case 7:return i=t.sent,t.next=10,r.A.cacheImage(e,n,i);case 10:console.log("Image cached successfully:",e);case 11:t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),console.warn("Failed to cache image:",e,t.t0);case 16:case"end":return t.stop()}}),t,null,[[0,13]])}))),function(t,e){return a.apply(this,arguments)})},{key:"toggleView",value:function(t){this.isMapView=t;var e=document.getElementById("grid-view-btn"),n=document.getElementById("map-view-btn"),r=document.getElementById("stories-container"),a=document.getElementById("stories-map");t?(null==n||n.classList.add("active"),null==e||e.classList.remove("active"),null==n||n.setAttribute("aria-pressed","true"),null==e||e.setAttribute("aria-pressed","false"),r&&(r.style.display="none"),a&&(a.style.display="block")):(null==e||e.classList.add("active"),null==n||n.classList.remove("active"),null==e||e.setAttribute("aria-pressed","true"),null==n||n.setAttribute("aria-pressed","false"),r&&(r.style.display="grid"),a&&(a.style.display="none"))}},{key:"getIsMapView",value:function(){return this.isMapView}},{key:"setupViewToggleListeners",value:function(t,e){var n=document.getElementById("grid-view-btn"),r=document.getElementById("map-view-btn");n&&n.addEventListener("click",t),r&&r.addEventListener("click",e)}},{key:"setupStoryNavigationListeners",value:function(t){var e=this,n=document.getElementById("stories-container");n.addEventListener("click",(function(n){var r=n.target.closest(".story-card");r&&(e.navigateToStory(r.dataset.storyId),t&&t(r.dataset.storyId))})),n.addEventListener("keydown",(function(n){var r=n.target.closest(".story-card");!r||"Enter"!==n.key&&" "!==n.key||(n.preventDefault(),e.navigateToStory(r.dataset.storyId),t&&t(r.dataset.storyId))}))}},{key:"navigateToStory",value:function(t){window.location.hash="#/story/".concat(t)}},{key:"initializeMap",value:(n=l(s().mark((function t(e,n){var r,a=this;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((r=document.getElementById("map"))&&window.loadLeaflet){t.next=3;break}return t.abrupt("return");case 3:return t.prev=3,t.next=6,window.loadLeaflet();case 6:e.setContainer(r),e.initialize(),e.addStoryMarkers(n,(function(t){a.navigateToStory(t)})),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(3),console.error("Error loading Leaflet:",t.t0);case 14:case"end":return t.stop()}}),t,null,[[3,11]])}))),function(t,e){return n.apply(this,arguments)})}],e&&u(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,n,a,o,c,d}()}}]);
//# sourceMappingURL=app~8f54dbf9.bundle.js.map