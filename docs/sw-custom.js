self.addEventListener("push",(o=>{console.log("Push event received:",o);let t={title:"Dicoding Stories",options:{body:"Ada story baru yang dibagikan!",icon:"/favicon.png",badge:"/favicon.png",data:{url:"/"}}};if(o.data)try{const i=o.data.json();t.title=i.title||t.title,t.options.body=i.options?.body||t.options.body,t.options.data=i.options?.data||t.options.data}catch(o){console.error("Error parsing push notification data:",o)}o.waitUntil(self.registration.showNotification(t.title,t.options))})),self.addEventListener("notificationclick",(o=>{console.log("Notification click received."),o.notification.close();const t=o.notification.data?.url||"/";o.waitUntil(clients.openWindow(t))})),console.log("Custom service worker functionality loaded");